# 1 背景

数据分析服务系统（Data Surge / Data Analysis Service System）。

# 2 数据分析服务平台与数格平台的关系

数格分析服务平台是数格的 6 个子模块之一，是利用数据进行加工并产生附加 价值的场所。对内对接 数据管理平台，对外为数据研发与分析人员提供相关服务。数 据管理平台向分析服务平台提供接口开放数据资源目录的访问与相关数据的取出与 写回。图1 为数格系统架构图，展示了数分平台在数格系统中与其他模块的关系。

# 3 使用用户

数格数据分析平台用户对象为**数据分析师**与**数据科学研发人员**。以下分别阐述不同用户的使用需求。

## 3.1 作为数据分析人员使用

数据分析人员在平台上主要开展一般性统计分析*描述性分析*，以及调用固化模型进行分析结果的输出。 数据分析人员工作涉及到分析的执行与报告编写，在分析执行的过程中也会对结果进行可视化设计，用于报告信息的有效传达。

## 3.2 作为数据科学研发人员使用

数据科学研发人员使用该平台进行对数据的探索分析，尝试建立不同的模型，并 对成熟模型进行固化开发以备调用。

### 3.2.1 描述性分析

描述性分析结合统计算法和可视化方式将数据包含的信息展示出来，用于描述数 据所代表的一般性现象。如计算一组观测数据的均值、中位数、众数、标准差、方差、 极值，通过这些统计量描述观测数据所描述的业务信息。再如使用柱状图、折线图、 饼图、直方图描述观测数据的变化趋势和分布情况。对于多维数据，有时需尝试使用 相关分析结合散点图来探索观测变量之间的关系。 描述性分析一方面有固定套路可循（如上述的统计与可视化方式），另一方面也 是发散性的。研究人员会根据不同的业务场景与数据自身的情况进行多样的尝试性 分析。

### 3.2.2 建模研究

数格分析平台中建模工作是有针对性的进行问题求解。这些建模研究分为两类： 数据挖掘建模 (knowledge discovery in database modeling, KDDM) 建模与数据驱动 决策建模 (data-driven decision modeling, DDDM)。

数据挖掘建模目标是在大量的数据集中提取出模式与知识，通常综合使用到统计 学、机器学习、数据库等相关领域知识。所建立的模型能够基于数据对未知目标进行 预测与分类、聚类、降维、异常检测等分析。 数据驱动决策建模是指在数据分析的基础上进行决策分析，针对实际问题的不同 会涉及到大量优化求解的过程。例如：线性规划、动态规划、启发式算法、随机方法 等。决策模型的输入往往基于数据挖掘模型的结果，其输出是计算出相关问题的最优 决策解。 两类建模研究的输入包括：干净数据载入；模型的算法设计或原型模型调用；模 型求解与参数调优；模型测试。输出是可直接调用的模型，输入所需计算数据时可计 算出预测结果或最优决策。

### 3.2.3 模型固化

模型固化开发对建模研究的最终产物进行固化封装，固化后的模型具备以下特 性：持久性、可调用、性能提升、通用性。

# 4 系统功能需求

数据分析系统按整体功能可以独立拆分为两部分：1） 以计算型叙述为核心的交互式分析环境（实验室）； 2）以易用、高效协作、历史记录可追溯为优势的在线报告出版平台。

## 4.1 交互分析

### 4.1.1 简介

交互式分析是线上分析的核心模块，以笔记本(Notebook)形式提供计算型叙述环境，笔记本可基于控制台的方法扩展到交互式计算方面，提供基于Web的数据分析应用环境。

### 4.1.2 主要功能

#### a 计算型叙述交互分析环境 (Notebook)

本部分需向用户提供基于B/S架构的数据分析功能。 用户可在 Web 端进行分析代码的编写，运算由服务端进行，并将运算记过返回给页面进行展示。

#####  Web 应用程序

  1. 用于代码的浏览器内编辑，自动语法高亮显示，缩进和制表符完成/内省

  2. 从浏览器执行代码的能力，计算结果附加在生成它们的代码上。

  3. 使用富媒体表示显示计算结果，如HTML，LaTeX，PNG，SVG等。例如，matplotlib库提供的出版质量数字可以内联包含。

  4. 使用Markdown标记语言进行富文本的浏览器内编辑，可以为代码提供注释，但不限于纯文本。

  5. 使用LaTeX轻松地将数学符号包含在降格单元格中，并由MathJax本地渲染的功能。

  6. 代码控制台为交互式运行代码提供暂存便笺簿，全面支持丰富的输出。例如，代码控制台可以链接到笔记本内核作为笔记本计算日志。

  7. 内核支持的文档可以使任何文本文件（Markdown，Python，R，LaTeX等）中的代码在任何Jupyter内核中以交互方式运行。

  8. Notebook笔记本电脑输出可以与笔记本电脑并排显示在自己的选项卡中，从而实现带有由内核支持的交互式控件的简单仪表板。

  9. 使用不同编辑者或查看者的多个文档视图可以实时编辑其他查看者反映的文档。例如，Markdown，定界符分隔值或Vega / Vega-Lite文档的实时预览很容易。

  10. 集成和可扩展的方式处理文档和活动，使用选项卡和拆分器将多个文档和活动并排排列在工作区域中。文档和活动相互结合，为交互式计算提供新的工作流程 。

##### 笔记本文件

1. Notebook文档包含交互式会话的输入和输出以及代码附带的其他文本，但不适用于执行.

2. 笔记本文件可以充当会话的完整计算记录，将可执行代码与解释性文本，数学和结果对象的丰富表示交织在一起。 

3. 文档是内部的JSON文件，并以`.ipynb`扩展名保存。由于JSON是纯文本格式，因此可以通过版本控制并与同事共享。 

#### b TAB 导航面板

##### 交互式终端

​	系统与操作人员的方式一问一答，直至获得最后处理结果。采用这种方式，程序设计人员可以边设计，边调整，边修改，使错误和不足之处及时得到改正和补充 ，系统能提供提示信息,逐步引导操作者完成所需的操作,得出处理结果。这种方式和非交互式处理相比具有灵活、直观、便于控制等优点。

##### 线上编辑器 (online editor)

​	支持多种格式的文档编辑，支持源代码的语法高亮和和自动渲染。带有基本的查找、复制粘贴、撤销和恢复等操作。可配置的缩进（制表符或空格），键位图和基本主题。这些设置可以在设置菜单中找到 。

##### 线上终端 (online terminal)

​	为用户提供终端操作，通过终端操作用户可自定义**内核**[^内核]。

##### 项目文件管理 (project file panel)

​	项目文件管理主体为对目录的结构和管理以及文档的管理。使您可以使用系统上的文件和目录。这包括打开，创建，删除，重命名，下载，复制和共享文件和目录 。

##### 会话监控 (session monitor)

​	用户可随时查看当前在运行的会话，并对会话有关闭和跳转功能。当用户关闭笔记本文档，代码控制台或终端时，服务器上运行的底层内核或终端将继续运行。这使您可以执行长时间运行的操作并稍后返回。“运行”面板使您可以重新打开或聚焦链接到给定内核或终端的文档 。



##### 用户管理模块
###### 1 身份认证

​	确认操作者身份，从而确定该用户是否具有对某种资源的访问和使用权限，进而使计算机和网络系统的访问策略能够可靠、有效地执行，防止攻击者假冒合法用户获得资源的访问权限，保证系统和数据的安全，以及授权访问者的合法利益。

###### 2 用户内核管理
​	为用户提供终端操作，用户可自定义内核。通过**内核**管理，用户可以根据自身需求自定义核心功能，为用户更好的提供交互式分析服务。

###### 3 用户模型管理

​	用户通过对模型[^模型]的固化、封装，增加工作的效率，减少过度的重复劳动。

##### 资源管理模块

本平台的资源主要分为两部分：1）用户模型资源管理。2）用于分析的数据管理。

###### 1 模型资源

​	用户通过对模型的权限管理。为平台增添可复用模型，更好的提供线上分析环境以及减少重复劳动。增加分析环境的氛围。

1. 模型的权限管理。
2. 模型的调用归类。

###### 2.3 数据资源

​	在互联网+的背景下，数据的重要性愈加明显。数据是进行可视化分析的重要基础，也是体现价值的重要指标。用户通过权限设置，明确数据的可使用范围以及授权使用，确保数据的安全性。

1. 明确规定数据的使用权限。
2. 明确规定数据的使用范围。
3. 数据的使用需要明确的记录。

	​	

### 4.2 报告系统

##### 4.2.1 概述

​	报告系统用于生产专业分析报告或其他专业文档的线上编辑环境。使用 Markdown 和/或 LaTex 语言作为编译内核，输出 PDF 格式的出版物。 Markdown 是一种轻量级标记语言 (LML)，具有易读性、轻便、跨平台等特性， 支持图片、表格、链接、公式、多级标题、引用等功能。LATEX 属于跨平台专业 外观文件的工具。用户在 L ATEX 环境下，模板中输入仅需要以纯文本输入相关内容， 格式处理与排版由 L ATEX 和所用模板负责处理。 Markdown 与 LaTeX 作为报告系统的文本编辑语言使用场景有所不同，轻量级标 记语言用于日常非正式的文档生产，LATEX 用于正式的文档出版物的生产。系统应提供转换机 制使两种格式的文本相互之间可进行转换。 

##### 4.2.2 主要功能

1. 始终与合作伙伴及他们正在做的事情保持同步。每个人都有权访问的每个文档只有一个主版本。不可能做出相互冲突的更改，而且您无需等待同事向您发送最新的草稿，然后才能继续工作。 

2. 包含所有更改的历史记录，以便您可以准确查看谁更改了什么以及何时更改。这使得您可以非常轻松地了解您的协作者所取得的进展，并且允许您查看最近的工作。 

3. 转换机制能使多种输出选择，格式处理与排版均由系统处理，更好的用于生产分析报告与其他文档的线上编辑环境。

   

## 5 功能要点

### 5.1 	1.0 开发

数格数据分析服务平台 Ver 1.0 着重实现基于开源框架的两大子功能平台的基本 功能的可用性。

要点：

1. 交互式分析集成。
2. 用户登陆认证。
3. 用户自定义核心。
4. 模型管理。
5. 数据管理。

	​	

### 5.2 2.0 开发 

数格数据分析服务平台 Ver 2.0 着重实现两大子功能平台的相互融合, 其中统一 权限管理、版本控制是着重开发与完善的功能。

### 5.3 3.0 开发 

数格数据分析服务平台 Ver 3.0 着重开发实现数格品牌标签的功能, 包括实现全 生命周期数据管理服务。



https://www.oreilly.com.cn/ideas/?p=1165

https://zhuanlan.zhihu.com/p/28284887



[^内核]: 内核是由不同编程语言和环境中运行代码的服务器启动的独立进程。
[^模型]: 单个功能化的代码片段