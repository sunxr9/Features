##### 1008

gitbook 容器启动命令

```
docker run --name=gitbook -p 8000:4000 -v /home/sunxr/exts140/git_data/gitbook:/srv/gitbook fellah/gitbook 
```

将运行名改为gitbook, 并指定启动端口和文件目录。



修改dockerfile， 创建自定义用户， 自定义安装anaconda

GitBook使用一个`SUMMARY.md`文件来定义本书的章节和子章节的结构。该`SUMMARY.md`文件用于生成图书的目录。

格式`SUMMARY.md`只是一个链接列表。链接的标题用作章节的标题，链接的目标是该章节文件的路径。



##### 1009

```
# 配置文件book.json
# 在运行的时候是添加这个文件会直接导致容器停机， 需要删除容器原有的，并执行以下命令， 
# 在启动的时候并安装扩展件，
docker run -it --name=gitbook -p 8000:4000 -v /home/sunxr/exts140/git_data/gitbook:/srv/gitbook fellah/gitbook gitbook install
```

启动安装扩展建， 但是安装之后就会停机， 不会继续运行。

安装完成之后容器不能再次启动，不知道为啥。

下午增加部署详情。

##### 1010

复制粘贴代码， 

创建book.json文件并写有以下内容：

```json
{
	"root": "./docs"
}
```

设置gitbook的更目录之后， SUMMARY.md文件就需要在更目录中。 而不是在项目的更目录中。并且链接路径也需要注意。



**win10** 不更新直接关机

shutdown -s -t 0 可以绕开更新直接关机…… 
shutdown -r -t 0 可以绕开更新直接重启…… 





##### 1011

docker容器一直出现安装错误，换一种安装方式，在安装`IJulia`包之前， 重置`JUPYTER`变量， 在julia shell中。

还是失败， 无法创建镜像， 修改dockerfile文件， 独立的创建julia容器。



使用系统名的jupyterhub中， 需要尝试一下使用以下镜像。而不是singleuser镜像。

**jupyterhub/systemuser**



##### 1012

codles/jupyter-with-julia-r(三种语言的镜像， 很老了， 不知道能不能用)

```
Single-user server has no version header, which means it is likely < 0.8. Expected 0.9.4
# 此问题可能是由于内外的jupytehub版本相差太大。
```

106.14.221.57， 测试IP

139.224.9.212， 空IP

106.15.198.200, gitlab

139.196.76.242 jupyter

139.196.102.25 redmine



##### 1015

完善InfluxDB，调研文档。



##### 1016

redmine 使用计划，

配置信息机器。

升级ubuntu 16.04 至18.04.

使用gnome桌面

```
sudo apt install gnome-session gdm3
sudo apt install tasksel
sudo tasksel install ubuntu-desktop
sudo service gdm3 start
# 在启动之后输入密码不能进入就重启。
# 在登录的时候点击ubuntu图标，选择启动的桌面。或者sign in 旁边的设置图标。
```

##### 1017

ubuntu install typora

```
wget -qO - https://typora.io/linux/public-key.asc | sudo apt-key add -
sudo add-apt-repository 'deb https://typora.io/linux ./'
sudo apt-get update
sudo apt-get install typora
sudo apt-get upgrade
```

ubuntu  install shadowsocks

```
# docker pull teddysun/shadowsocks-python
# config /etc/shadowsocks-python/config.json

{
    "server":"0.0.0.0",
    "server_port":9000,
    "local_address":"127.0.0.1",
    "local_port":1080,
    "password":"password0",
    "timeout":120,
    "method":"aes-256-cfb",
    "fast_open":true
}

# run commands
docker run -d -p 9000:9000 -p 9000:9000/udp --name ss -v /etc/shadowsocks-python:/etc/shadowsocks-python teddysun/shadowsocks-python
```

以上是docker使用shadowsocks， 没弄好。 最好还是解压的之后执行的安装文件，shadowsocks_all.sh

##### 1018

数据转换完成，进行测试写入。

数据转化的基础错误。

merge合并文件。默认会将重复列去除。不需要参数。

讲原有的时间转化为Datetime格式。

去除原有的时间列。

将原有的数据不全。 在较多缺失值的数据会出现问题，需要补全之后进行插入。



dockerfile  julia安装问题尝试：

```
1. using Pkg; Pkg.update()# 确认没有缺少包
2. using Pkg; Pkg.add('ZMQ') # 单独安装建立ZMQ
3. using Pkg; Pkg.rm("ZMQ"); Pkg.add("ZMQ")#删除重建
4. 去除conda安装R语言， 只升级，安装Julia。
```

##### 1019

继续容器。并在安装一些软件。

输入法的设定，也可以通过im-config, 启动设置。

重启代理服务器。

配置ssh key

将已有的ssh key发送到需要登陆的机器上， 直接使用

> ssh-copy-id <username>@<host> 

```
#! -*- conding: utf-8 -*-
  
FROM jupyterhub/singleuser:latest

USER root
RUN apt-get update && apt-get upgrade -y
RUN apt-get install -y nginx && apt-get install -y docker && apt-get clean

ADD nginx.conf /etc/nginx/
ADD jupyterhub_config.py /etc/jupyterhub/
ADD cull_idle_servers.py /etc/jupyterhub/

RUN conda install -c conda-forge jupyterhub && pip install dockerspawner oauthenticator && docker pull jupyterhub/singleuser:latest

WORKDIR /etc/jupyterhub

RUN jupyterhub -f /etc/jupyterhub/jupyterhub_config.py

EXPOSE 80/tcp

CMD ["nginx", "-c", "/etc/nginx/nginx.conf"]

```

